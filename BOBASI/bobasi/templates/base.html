<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Bobasi NG-CDF Bursary System{% endblock %}</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  {% block extra_css %}{% endblock %}
</head>
<body>
<nav class="navbar">
  <div class="nav-container">
    <a href="{{ url_for('auth.home') }}" class="brand">
      <div class="brand-logo">
        <img src="{{ url_for('static', filename='img/ngcdf-logo.svg') }}" alt="NG-CDF Logo">
      </div>
      <div class="brand-text">
        <span class="brand-main">Bobasi Bursary</span>
        <span class="brand-sub">NG-CDF Â· Kisii County, Kenya</span>
      </div>
    </a>
    <div class="nav-links">
      <a href="{{ url_for('auth.home') }}" class="nav-link">Home</a>
      <a href="{{ url_for('application.track') }}" class="nav-link">Track Application</a>
      {% if current_user.is_authenticated %}
        {% if current_user.role == 'student' %}
          <a href="{{ url_for('student.dashboard') }}" class="nav-link">My Dashboard</a>
          <a href="{{ url_for('application.apply') }}" class="nav-link nav-btn">Apply Now</a>
        {% elif current_user.role in ('admin','review_committee') %}
          <a href="{{ url_for('admin.dashboard') }}" class="nav-link">Admin Panel</a>
        {% elif current_user.role == 'finance_officer' %}
          <a href="{{ url_for('finance.dashboard') }}" class="nav-link">Finance Portal</a>
        {% endif %}
        <div class="nav-user-wrap">
          {% if current_user.unread_notifications > 0 %}
          <a href="{{ url_for('student.notifications') if current_user.role == 'student' else '#' }}" class="notif-bell">
            ğŸ”” <span class="notif-count">{{ current_user.unread_notifications }}</span>
          </a>
          {% endif %}
          <div class="nav-user">
            <span class="user-avatar">{{ current_user.name[0].upper() }}</span>
            <span class="user-name">{{ current_user.name.split()[0] }}</span>
            <div class="user-dropdown">
              <a href="{{ url_for('auth.change_password') }}">ğŸ”‘ Change Password</a>
              <a href="{{ url_for('auth.logout') }}" class="logout-link">ğŸšª Logout</a>
            </div>
          </div>
        </div>
      {% else %}
        <a href="{{ url_for('auth.login') }}" class="nav-link">Login</a>
        <a href="{{ url_for('auth.register') }}" class="nav-link nav-btn">Register</a>
      {% endif %}
    </div>
    <button class="mobile-menu-btn" onclick="document.getElementById('mobileMenu').style.display=document.getElementById('mobileMenu').style.display==='block'?'none':'block'">â˜°</button>
  </div>
  <div class="mobile-menu" id="mobileMenu">
    <a href="{{ url_for('auth.home') }}">ğŸ  Home</a>
    <a href="{{ url_for('application.track') }}">ğŸ” Track Application</a>
    {% if current_user.is_authenticated %}
      <a href="{{ url_for('auth.change_password') }}">ğŸ”‘ Change Password</a>
      <a href="{{ url_for('auth.logout') }}">ğŸšª Logout</a>
    {% else %}
      <a href="{{ url_for('auth.login') }}">Login</a>
      <a href="{{ url_for('auth.register') }}">Register</a>
    {% endif %}
  </div>
</nav>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
  <div class="flash-container">
    {% for cat, msg in messages %}
    <div class="flash flash-{{ cat }}">
      <span>{{ msg | safe }}</span>
      <button onclick="this.parentElement.remove()" class="flash-close">âœ•</button>
    </div>
    {% endfor %}
  </div>
  {% endif %}
{% endwith %}

{% block content %}{% endblock %}

<footer class="footer">
  <div class="footer-inner">
    <div class="footer-brand">
      <div class="brand-logo" style="width:56px;height:56px;">
        <img src="{{ url_for('static', filename='img/ngcdf-logo.svg') }}" alt="NG-CDF Logo">
      </div>
      <p style="margin-top:14px;">Bobasi Constituency Development Fund<br>Kisii County, Kenya<br>2025/2026 Financial Year</p>
    </div>
    <div class="footer-col">
      <h4>Contact Us</h4>
      <p>ğŸ“ Next to D.C.C's Office<br>Off Hospital Road â€“ Nyamache</p>
      <p>ğŸ“® P.O BOX 98-40203, Nyamache</p>
    </div>
    <div class="footer-col">
      <h4>Our Offices</h4>
      <p>ğŸ¢ Nyamache</p>
      <p>ğŸ¢ Itumbe</p>
      <p>ğŸ¢ Nyacheki</p>
    </div>
    <div class="footer-col">
      <h4>Quick Links</h4>
      <a href="{{ url_for('auth.register') }}">Apply for Bursary</a>
      <a href="{{ url_for('application.track') }}">Track Application</a>
      <a href="{{ url_for('auth.login') }}">Student Login</a>
    </div>
  </div>
  <div class="footer-bottom">
    <p>&copy; 2025 Bobasi NG-CDF Bursary Management System â€” Bobasi Constituency Office, Kisii County</p>
  </div>
</footer>

<script src="{{ url_for('static', filename='js/main.js') }}"></script>
{% block extra_js %}{% endblock %}
</body>
</html>
